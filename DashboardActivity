package com.SIMATS.rise;

import android.app.AlertDialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import androidx.appcompat.app.AppCompatActivity;

public class DashboardActivity extends AppCompatActivity {

    LinearLayout menuJourney, menuStatus,  menuAchievements, menuExit;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_dashboard);

        // Linking layout items
        menuJourney = findViewById(R.id.menu_journey);
        menuStatus = findViewById(R.id.menu_status);

        menuAchievements = findViewById(R.id.menu_achievements);

        menuExit = findViewById(R.id.menu_exit);

        // Navigation actions
        menuJourney.setOnClickListener(v -> startActivity(new Intent(this, MyJourneyActivity.class)));
        menuStatus.setOnClickListener(v -> startActivity(new Intent(this, CompanionStatusActivity.class)));
        menuAchievements.setOnClickListener(v -> startActivity(new Intent(this, AchievementsActivity.class)));

        // Show exit dialog when Exit is clicked
        menuExit.setOnClickListener(v -> showExitDialog());
    }

    private void showExitDialog() {
        // Inflate the custom dialog layout
        LayoutInflater inflater = getLayoutInflater();
        View dialogView = inflater.inflate(R.layout.exit_dialog, null);

        AlertDialog.Builder builder = new AlertDialog.Builder(this, R.style.CustomDialog);
        builder.setView(dialogView);
        builder.setCancelable(false); // Prevent closing by clicking outside

        AlertDialog alertDialog = builder.create();

        // Handle buttons
        Button btnYes = dialogView.findViewById(R.id.btn_yes);
        Button btnNo = dialogView.findViewById(R.id.btn_no);

        btnYes.setOnClickListener(v -> {
            alertDialog.dismiss();
            finishAffinity(); // Closes the app
        });

        btnNo.setOnClickListener(v -> {
            alertDialog.dismiss(); // Just dismiss the dialog
        });

        alertDialog.show();
    }

    // Optional method if triggered from XML with android:onClick
    public void goToDashboard(View view) {
        Intent intent = new Intent(this, DashboardActivity.class);
        startActivity(intent);
        finish();
    }
}
